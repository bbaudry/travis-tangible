<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Try tone</title>
    <style>
      .button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }
    </style>
  </head>

  <body>
    <!--<button class="button" onmousedown="playC()" onmouseup="stopC()" >play C</button>-->
    <button class="button" onclick="startTexture()" >start</button>
    <button class="button" onclick="stopTexture()" >stop</button>
    <button class="button" onclick="playA()" >play A</button>
    <canvas id="canvas" width="900" height="900">No canvas support</canvas>
    <script src="tone.js"></script>
    <script src="ToneDrone.js" type="text/javascript"></script>
    <script>
	toneDrone = new ToneDrone();
    toneDrone.connectComponents();

    synth = new Tone.FMSynth({

        "harmonicity": 1.11,
        "modulationIndex": 5,
        "detune": 0,
        "oscillator": {
            "type": "triangle"
        },
        "modulation": {
            "type": "sine"
        },
        "modulationEnvelope": {
            "attack": 1,//0.05,
            "decay": 0,
            "sustain": 1.0,
            "release": 0.2,
        }
        }).toMaster();

    function startTexture(){
        synth.triggerAttack("C1");
    }

    function stopTexture(){
        toneDrone.synth.triggerRelease();
    }
    const synthMembrane = new Tone.MembraneSynth().toMaster();
    function playA(){
        synthMembrane.triggerAttackRelease("C2", "8n");
    }

    </script>
  </body>
</html>
